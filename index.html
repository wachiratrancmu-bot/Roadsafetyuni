<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>SafeRoad TH ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<style>
:root{--navy:#1a365d;--navy-d:#0f2440;--navy-l:#2c5282;--navy-bg:#ebf0f9;--white:#fff;--bg:#f7f8fb;--sf:#fff;--sf2:#f0f2f7;--sf3:#e8ebf2;--bd:#d2d8e3;--bd-l:#e5e9f0;--tx:#1a2332;--tx2:#475569;--tx3:#94a3b8;--txi:#fff;--red:#b91c1c;--red-bg:#fef2f2;--red-bd:#fecaca;--amb:#b45309;--amb-bg:#fffbeb;--amb-bd:#fde68a;--grn:#15803d;--grn-bg:#f0fdf4;--grn-bd:#bbf7d0;--blu:#1d4ed8;--blu-bg:#eff6ff;--blu-bd:#bfdbfe;--f:'Sarabun',sans-serif;--m:'JetBrains Mono',monospace;--r:8px;--rl:12px;--sh:0 1px 3px rgba(0,0,0,.08);--shm:0 4px 12px rgba(0,0,0,.1);--shl:0 10px 25px rgba(0,0,0,.12)}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{font-family:var(--f);background:var(--bg);color:var(--tx);-webkit-tap-highlight-color:transparent;overflow:hidden;font-size:15px;line-height:1.5}
button{font-family:var(--f);cursor:pointer}input,select,textarea{font-family:var(--f)}

/* LOGIN */
#login-screen{position:fixed;inset:0;z-index:9999;background:linear-gradient(160deg,var(--navy),var(--navy-d));display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;transition:opacity .4s}
.ll{text-align:center;color:var(--txi);margin-bottom:28px}
.ll-icon{width:56px;height:56px;background:rgba(255,255,255,.12);border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px}
.ll h1{font-size:22px;font-weight:800}.ll p{font-size:13px;opacity:.7;margin-top:2px}
.lc{width:100%;max-width:420px;background:var(--white);border-radius:16px;overflow:hidden;box-shadow:var(--shl)}
.lt{display:flex;background:var(--sf2);border-bottom:1px solid var(--bd)}
.lt button{flex:1;padding:13px 4px;text-align:center;font-size:13px;font-weight:700;color:var(--tx3);border:none;background:none;border-bottom:3px solid transparent;transition:all .2s}
.lt button.a{color:var(--navy);border-bottom-color:var(--navy);background:var(--white)}
.lb{padding:24px;min-height:320px;display:flex;flex-direction:column}
.lf{display:none;flex:1;flex-direction:column}.lf.a{display:flex}
.fd{margin-bottom:16px}.fl{display:block;font-size:12px;font-weight:700;color:var(--navy);margin-bottom:5px;text-transform:uppercase;letter-spacing:.3px}
.fi,.fs{width:100%;padding:11px 14px;border:1.5px solid var(--bd);border-radius:var(--r);font-size:15px;color:var(--tx);background:var(--white);outline:none;transition:all .2s}
.fi:focus,.fs:focus{border-color:var(--navy);box-shadow:0 0 0 3px var(--navy-bg)}
.fi::placeholder{color:var(--tx3)}.fr{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.fh{font-size:11px;color:var(--tx3);margin-top:4px}.fe{font-size:11px;color:var(--red);margin-top:4px;display:none;font-weight:600}.fe.show{display:block}
.anon-box{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--sf2);border:2px dashed var(--bd);border-radius:var(--rl);padding:32px 20px;text-align:center;margin-bottom:16px}
.anon-box p{font-size:13px;color:var(--tx2);line-height:1.6;margin-top:12px}
.bl{width:100%;padding:14px;background:var(--navy);color:var(--txi);border:none;border-radius:var(--r);font-size:16px;font-weight:700;transition:background .2s;margin-top:auto}
.bl:active{background:var(--navy-d)}

/* APP LAYOUT */
#app-main{display:none;height:100dvh;flex-direction:column;position:relative}
.ah{background:var(--navy);color:var(--txi);padding:0 16px;height:54px;display:flex;align-items:center;justify-content:space-between;box-shadow:var(--shm);z-index:1000;flex-shrink:0}
.ah h2{font-size:16px;font-weight:800}.ah span{font-size:10px;opacity:.65}
.hb{background:rgba(255,255,255,.12);padding:5px 12px;border-radius:20px;font-size:12px;font-weight:700;display:flex;align-items:center;gap:5px;cursor:pointer}
.views{flex:1;position:relative;overflow:hidden}
.vw{position:absolute;inset:0;display:none;overflow-y:auto}.vw.a{display:block}
#view-map{overflow:hidden}#main-map{width:100%;height:100%}

/* Map controls */
.moc{position:absolute;top:12px;right:12px;z-index:800;display:flex;flex-direction:column;gap:6px}
.mcb{width:40px;height:40px;background:var(--white);border:1px solid var(--bd);border-radius:var(--r);display:flex;align-items:center;justify-content:center;box-shadow:var(--shm)}
.mcb.a{background:var(--navy);color:var(--txi);border-color:var(--navy)}
.mcb svg{width:18px;height:18px}
.mmb{position:absolute;bottom:90px;left:12px;right:12px;z-index:800;display:flex;gap:6px;background:var(--white);padding:4px;border-radius:var(--r);box-shadow:var(--shm);border:1px solid var(--bd)}
.mmb button{flex:1;padding:8px;font-size:12px;font-weight:700;text-align:center;border:none;background:transparent;border-radius:6px;color:var(--tx2);transition:all .15s}
.mmb button.a{background:var(--navy);color:var(--txi)}

/* Bottom Nav */
.bn{position:absolute;bottom:0;left:0;right:0;height:64px;background:var(--white);border-top:1px solid var(--bd);display:flex;z-index:1000;box-shadow:0 -2px 8px rgba(0,0,0,.04);padding-bottom:env(safe-area-inset-bottom)}
.ni{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--tx3);font-size:10px;font-weight:700;border:none;background:none;transition:color .2s}
.ni svg{width:22px;height:22px;margin-bottom:3px;stroke-width:1.8}.ni.a{color:var(--navy)}
.fw{flex:1;display:flex;justify-content:center;position:relative}
.fab{position:absolute;top:-22px;width:52px;height:52px;background:var(--navy);color:var(--txi);border-radius:50%;border:3px solid var(--white);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px rgba(26,54,93,.35)}
.fab:active{transform:scale(.92)}.fab svg{width:22px;height:22px;stroke-width:2.5}

/* WIZARD */
.wo{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:2000;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(3px)}
.wo.open{display:flex}
.ws{width:100%;max-width:600px;background:var(--bg);max-height:94dvh;border-radius:20px 20px 0 0;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .35s cubic-bezier(.32,.72,.32,1);box-shadow:0 -8px 30px rgba(0,0,0,.15)}
.wo.open .ws{transform:translateY(0)}
.wh{display:flex;justify-content:center;padding:10px 0 4px}.whb{width:36px;height:4px;background:var(--bd);border-radius:4px}
.wt{padding:4px 20px 14px;display:flex;justify-content:space-between;align-items:center}
.wt h3{font-size:18px;font-weight:800;color:var(--navy)}
.wcl{width:32px;height:32px;background:var(--sf2);border:none;border-radius:50%;font-size:18px;color:var(--tx2);display:flex;align-items:center;justify-content:center}
.wp{padding:0 20px 12px}.wpt{height:4px;background:var(--sf3);border-radius:4px;overflow:hidden}
.wpf{height:100%;background:var(--navy);border-radius:4px;transition:width .4s}.wpl{font-size:11px;color:var(--tx3);margin-top:4px;font-weight:600;text-align:right}
.wb{flex:1;overflow-y:auto;padding:0 20px 20px;-webkit-overflow-scrolling:touch}
.wst{display:none;animation:wfi .3s ease}.wst.a{display:block}
@keyframes wfi{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.wf{padding:12px 20px;padding-bottom:calc(12px + env(safe-area-inset-bottom));background:var(--white);border-top:1px solid var(--bd);display:flex;gap:10px;flex-shrink:0}
.bbk{flex:0 0 auto;padding:13px 20px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r);font-size:15px;font-weight:700;color:var(--tx2)}
.bnx{flex:1;padding:13px;background:var(--navy);color:var(--txi);border:none;border-radius:var(--r);font-size:15px;font-weight:700;transition:all .15s}
.bnx:active{background:var(--navy-d)}.bnx.sub{background:var(--grn)}.bnx.sub:active{background:#116932}

/* Section headers */
.sh{display:flex;align-items:center;gap:10px;margin:20px 0 12px;padding-bottom:8px;border-bottom:2px solid var(--navy-bg)}
.sh:first-child{margin-top:0}
.si{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:14px}
.si svg{width:16px;height:16px}
.si.red{background:var(--red-bg);color:var(--red)}.si.amb{background:var(--amb-bg);color:var(--amb)}.si.grn{background:var(--grn-bg);color:var(--grn)}.si.blu{background:var(--blu-bg);color:var(--blu)}.si.nvy{background:var(--navy-bg);color:var(--navy)}
.st{font-size:14px;font-weight:700;color:var(--tx)}.ss{font-size:11px;color:var(--tx3);margin-top:1px}

/* Type cards */
.tcs{display:flex;flex-direction:column;gap:10px}
.tc{display:flex;align-items:center;padding:16px;background:var(--white);border:1.5px solid var(--bd);border-radius:var(--rl);cursor:pointer;transition:all .2s;box-shadow:var(--sh);gap:14px}
.tc:active{transform:scale(.98)}.tc:hover{border-color:var(--navy)}
.tci{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;font-weight:800}
.tc[data-type="accident"] .tci{background:var(--red-bg);border:1.5px solid var(--red-bd);color:var(--red)}
.tc[data-type="frequent"] .tci{background:var(--amb-bg);border:1.5px solid var(--amb-bd);color:var(--amb)}
.tc[data-type="near"] .tci{background:var(--grn-bg);border:1.5px solid var(--grn-bd);color:var(--grn)}
.tc[data-type="observe"] .tci{background:var(--blu-bg);border:1.5px solid var(--blu-bd);color:var(--blu)}
.tc h4{font-size:15px;font-weight:700}.tc p{font-size:12px;color:var(--tx2);margin-top:2px}

/* Option grid */
.og{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.og.c2{grid-template-columns:repeat(2,1fr)}.og.c4{grid-template-columns:repeat(4,1fr)}
.oc{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:14px 6px 10px;background:var(--sf2);border:1.5px solid var(--bd-l);border-radius:var(--r);cursor:pointer;transition:all .2s;text-align:center;min-height:78px;position:relative}
.oc .oi{font-size:24px;margin-bottom:6px;line-height:1}.oc .ol{font-size:11px;font-weight:600;color:var(--tx2);line-height:1.3}
.oc.sel{background:var(--navy-bg);border-color:var(--navy);box-shadow:inset 0 0 0 1.5px var(--navy)}
.oc.sel .ol{color:var(--navy);font-weight:700}
.oc.sel::after{content:'‚úì';position:absolute;top:4px;right:6px;font-size:11px;font-weight:800;color:var(--navy)}
.oc:active{transform:scale(.96)}
.oc.sgl.sel{background:var(--navy);border-color:var(--navy)}.oc.sgl.sel .oi{filter:brightness(10)}.oc.sgl.sel .ol{color:var(--txi)}.oc.sgl.sel::after{color:var(--txi)}

/* Form map */
.fmw{border-radius:var(--rl);overflow:hidden;border:1.5px solid var(--bd);background:var(--sf2);margin-bottom:12px;position:relative}
#form-map{width:100%;height:300px;z-index:1}
.fmw.fs{position:fixed;inset:0;z-index:3000;border-radius:0;border:none}.fmw.fs #form-map{height:100%}
.fmt{position:absolute;bottom:12px;left:12px;right:12px;z-index:400;display:flex;gap:6px}
.fb{flex:1;padding:10px 8px;background:var(--white);border:1px solid var(--bd);border-radius:var(--r);font-size:12px;font-weight:700;color:var(--tx);box-shadow:var(--shm);display:flex;align-items:center;justify-content:center;gap:5px}
.fb.a{background:var(--navy);color:var(--txi);border-color:var(--navy)}
.fb svg{width:16px;height:16px;flex-shrink:0}
.ffs{position:absolute;top:12px;right:12px;z-index:400;width:36px;height:36px;background:var(--white);border:1px solid var(--bd);border-radius:var(--r);display:flex;align-items:center;justify-content:center;box-shadow:var(--shm)}
.ffs svg{width:16px;height:16px}
.fcf{position:absolute;top:16px;left:16px;z-index:400;padding:8px 16px;background:var(--white);border:1px solid var(--bd);border-radius:var(--r);font-size:13px;font-weight:700;color:var(--tx);box-shadow:var(--shm);display:none;align-items:center;gap:6px}
.fmw.fs .fcf{display:flex}.fmw.fs .ffs{display:none}
.cd{text-align:center;padding:8px;background:var(--navy-bg);border-radius:var(--r);font-family:var(--m);font-size:12px;font-weight:600;color:var(--navy)}
.cd.empty{background:var(--red-bg);color:var(--red)}

/* Photo */
.pz{display:flex;gap:10px;align-items:center;padding:16px;background:var(--sf2);border:2px dashed var(--bd);border-radius:var(--rl);cursor:pointer}
.pz:active{background:var(--sf3)}
.pzi{width:44px;height:44px;background:var(--navy-bg);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.pzi svg{width:22px;height:22px;color:var(--navy)}
.pzt h4{font-size:14px;font-weight:700;color:var(--navy)}.pzt p{font-size:11px;color:var(--tx3);margin-top:1px}
.pp{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.pt{position:relative;width:100px;height:100px;border-radius:var(--r);overflow:hidden;border:1px solid var(--bd)}
.pt img{width:100%;height:100%;object-fit:cover}
.ptd{position:absolute;top:4px;right:4px;width:24px;height:24px;background:rgba(0,0,0,.7);color:var(--white);border:none;border-radius:50%;font-size:14px;display:flex;align-items:center;justify-content:center}
.da{width:100%;padding:12px 14px;border:1.5px solid var(--bd);border-radius:var(--r);font-size:15px;color:var(--tx);background:var(--white);resize:vertical;min-height:80px;outline:none;transition:border-color .2s}
.da:focus{border-color:var(--navy);box-shadow:0 0 0 3px var(--navy-bg)}

/* List view */
.vh{padding:16px 16px 12px;background:var(--white);border-bottom:1px solid var(--bd);position:sticky;top:0;z-index:10}
.vh h2{font-size:18px;font-weight:800;color:var(--navy)}
.cps{display:flex;gap:6px;margin-top:10px;overflow-x:auto;padding-bottom:2px}
.cp{padding:6px 14px;background:var(--sf2);border:1px solid var(--bd-l);border-radius:20px;font-size:12px;font-weight:700;color:var(--tx2);white-space:nowrap;flex-shrink:0;cursor:pointer}
.cp.a{background:var(--navy);color:var(--txi);border-color:var(--navy)}
.rl{padding:12px 16px 80px;display:flex;flex-direction:column;gap:10px}
.ri{background:var(--white);border:1px solid var(--bd-l);border-radius:var(--rl);padding:14px 16px;box-shadow:var(--sh);border-left:4px solid var(--bd)}
.ri.accident{border-left-color:var(--red)}.ri.frequent{border-left-color:var(--amb)}.ri.near,.ri.observe{border-left-color:var(--grn)}
.rih{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.rtb{font-size:12px;font-weight:700;padding:2px 10px;border-radius:20px}
.ri.accident .rtb{background:var(--red-bg);color:var(--red)}.ri.frequent .rtb{background:var(--amb-bg);color:var(--amb)}.ri.near .rtb,.ri.observe .rtb{background:var(--grn-bg);color:var(--grn)}
.rdt{font-size:11px;color:var(--tx3);font-family:var(--m)}
.rds{font-size:13px;color:var(--tx2);margin-bottom:8px;line-height:1.5}
.rts{display:flex;flex-wrap:wrap;gap:4px}
.rt{font-size:10px;font-weight:600;padding:2px 8px;border-radius:4px;background:var(--sf2);color:var(--tx2)}

/* Rank */
.rkl{padding:12px 16px 80px}
.rki{display:flex;align-items:center;background:var(--white);padding:12px 16px;border-radius:var(--r);margin-bottom:8px;border:1px solid var(--bd-l);box-shadow:var(--sh)}
.rkn{font-size:16px;font-weight:800;width:32px;color:var(--navy);font-family:var(--m)}
.rkin{flex:1;margin-left:4px}.rkin b{font-size:14px}.rkin small{font-size:11px;color:var(--tx3);display:block}
.rkp{font-size:16px;font-weight:800;color:var(--amb);font-family:var(--m)}
.rki:nth-child(1) .rkn{color:#d4a017;font-size:18px}.rki:nth-child(2) .rkn{color:#8a8a8a}.rki:nth-child(3) .rkn{color:#b87333}

/* Profile */
.ph{margin:16px;background:linear-gradient(135deg,var(--navy),var(--navy-l));color:var(--txi);border-radius:16px;padding:28px 24px;text-align:center;box-shadow:var(--shl)}
.ph h2{font-size:20px;font-weight:800}.ph p{font-size:12px;opacity:.7;margin-top:2px}
.ps{display:flex;justify-content:space-around;margin-top:20px;background:rgba(255,255,255,.1);padding:14px;border-radius:var(--r)}
.psv{font-size:24px;font-weight:800;font-family:var(--m);color:#fbbf24}.psl{font-size:10px;text-transform:uppercase;opacity:.7;margin-top:2px}
.bsec{padding:0 16px 80px}.bsec h3{font-size:14px;font-weight:700;color:var(--navy);margin:16px 0 10px}
.bg{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.bi{background:var(--white);border:1.5px solid var(--bd-l);border-radius:var(--r);padding:16px 8px;text-align:center;opacity:.35;transition:all .3s}
.bi.e{opacity:1;border-color:var(--amb-bd);background:var(--amb-bg);box-shadow:var(--sh)}
.bi .bii{font-size:28px;margin-bottom:6px}.bi .bin{font-size:11px;font-weight:700;color:var(--tx);line-height:1.3}

/* Toast */
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-20px);background:var(--navy);color:var(--txi);padding:12px 24px;border-radius:30px;font-size:14px;font-weight:700;opacity:0;visibility:hidden;transition:all .3s;z-index:9999;box-shadow:var(--shl);white-space:nowrap}
.toast.show{opacity:1;visibility:visible;transform:translateX(-50%) translateY(0)}.toast.err{background:var(--red)}
.es{text-align:center;padding:60px 20px;color:var(--tx3)}.es p{font-size:14px}

@media(max-width:380px){.og{grid-template-columns:repeat(2,1fr)}.og.c4{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-screen">
  <div class="ll">
    <div class="ll-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg></div>
    <h1>SafeRoad TH</h1>
    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô ‚Äî ‡∏°‡∏£‡∏†.‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°</p>
  </div>
  <div class="lc">
    <div class="lt" id="ltabs">
      <button class="a" data-t="student">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</button>
      <button data-t="staff">‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</button>
      <button data-t="public">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</button>
      <button data-t="anon">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</button>
    </div>
    <div class="lb">
      <div class="lf a" id="lf-student">
        <div class="fd"><label class="fl">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (10 ‡∏´‡∏•‡∏±‡∏Å) <span style="color:var(--red)">*</span></label><input type="tel" class="fi" id="inp-sid" maxlength="10" placeholder="‡πÄ‡∏ä‡πà‡∏ô 6812207001" inputmode="numeric"><div class="fh" id="fac-hint">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™ 10 ‡∏´‡∏•‡∏±‡∏Å ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ì‡∏∞‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div><div class="fe" id="sid-err">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 10 ‡∏´‡∏•‡∏±‡∏Å</div></div>
        <div class="fd"><label class="fl">‡∏Ñ‡∏ì‡∏∞ <span style="color:var(--red)">*</span></label><select class="fs" id="sel-fac"><option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞ ‚Äî</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏Ñ‡∏£‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏Ñ‡∏£‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option><option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option><option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô">‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</option><option value="‡∏Ñ‡∏ì‡∏∞‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option><option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</option></select></div>
        <div class="fd fr"><div><label class="fl">‡∏ä‡∏∑‡πà‡∏≠ <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-fn-s" placeholder="‡∏ä‡∏∑‡πà‡∏≠"></div><div><label class="fl">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-ln-s" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></div></div>
        <button class="bl" onclick="doLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
      <div class="lf" id="lf-staff">
        <div class="fd"><label class="fl">‡∏Ñ‡∏ì‡∏∞ / ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô <span style="color:var(--red)">*</span></label><select class="fs" id="sel-fac-staff"><option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ‚Äî</option><option>‡∏Ñ‡∏ì‡∏∞‡∏Ñ‡∏£‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option><option>‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option><option>‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</option><option>‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option><option>‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option><option>‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</option><option>‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏î‡∏µ</option><option>‡∏Å‡∏≠‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</option><option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select></div>
        <div class="fd fr"><div><label class="fl">‡∏ä‡∏∑‡πà‡∏≠ <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-fn-st" placeholder="‡∏ä‡∏∑‡πà‡∏≠"></div><div><label class="fl">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-ln-st" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></div></div>
        <button class="bl" onclick="doLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
      <div class="lf" id="lf-public">
        <p style="font-size:13px;color:var(--tx2);margin-bottom:16px;line-height:1.6">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏£‡πà‡∏ß‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö</p>
        <div class="fd fr"><div><label class="fl">‡∏ä‡∏∑‡πà‡∏≠ <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-fn-p" placeholder="‡∏ä‡∏∑‡πà‡∏≠"></div><div><label class="fl">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• <span style="color:var(--red)">*</span></label><input type="text" class="fi" id="inp-ln-p" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></div></div>
        <button class="bl" onclick="doLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
      <div class="lf" id="lf-anon">
        <div class="anon-box"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--tx3)" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><p>‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô<br>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p></div>
        <button class="bl" onclick="doLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</button>
      </div>
    </div>
  </div>
</div>

<!-- APP MAIN -->
<div id="app-main">
  <div class="ah"><div><h2>SafeRoad TH</h2><span>‡∏°‡∏£‡∏†.‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°</span></div><div class="hb" onclick="switchView('profile')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M20 21a8 8 0 0 0-16 0"/></svg><span id="hdr-pts">0 PT</span></div></div>
  <div class="views">
    <!-- MAP -->
    <div class="vw a" id="view-map">
      <div id="main-map"></div>
      <div class="moc">
        <button class="mcb" id="mc-sat" onclick="toggleMainSat()" title="‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></button>
        <button class="mcb" onclick="locateMe()" title="‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v2m0 16v2M2 12h2m16 0h2"/><circle cx="12" cy="12" r="8"/></svg></button>
      </div>
      <div class="mmb"><button class="a" onclick="setMapMode('pin',this)">‡∏´‡∏°‡∏∏‡∏î</button><button onclick="setMapMode('heat',this)">Heat Map</button><button onclick="setMapMode('cluster',this)">‡∏Å‡∏•‡∏∏‡πà‡∏°</button></div>
    </div>
    <!-- LIST -->
    <div class="vw" id="view-list">
      <div class="vh"><h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2><div class="cps" id="fchips"><button class="cp a" data-f="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button><button class="cp" data-f="accident">‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</button><button class="cp" data-f="frequent">‡πÄ‡∏Å‡∏¥‡∏î‡∏ö‡πà‡∏≠‡∏¢</button><button class="cp" data-f="near">‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏î</button><button class="cp" data-f="observe">‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô</button></div></div>
      <div class="rl" id="rpt-list"></div>
    </div>
    <!-- RANK -->
    <div class="vw" id="view-rank"><div class="vh"><h2>‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</h2></div><div class="rkl" id="rank-list"></div></div>
    <!-- PROFILE -->
    <div class="vw" id="view-profile">
      <div class="ph"><h2 id="prof-name">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2><p id="prof-fac">‚Äî</p><div class="ps"><div><div class="psv" id="prof-pts">0</div><div class="psl">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div></div><div><div class="psv" id="prof-rpt">0</div><div class="psl">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</div></div></div></div>
      <div class="bsec"><h3>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ï‡∏£‡∏≤</h3><div class="bg"><div class="bi" id="b1"><div class="bii">üèÖ</div><div class="bin">‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏≥‡∏£‡∏ß‡∏à<br><small style="font-weight:400;color:var(--tx3)">1 ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</small></div></div><div class="bi" id="b5"><div class="bii">üéñÔ∏è</div><div class="bin">‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå<br><small style="font-weight:400;color:var(--tx3)">5 ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</small></div></div><div class="bi" id="b20"><div class="bii">üèÜ</div><div class="bin">‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå‡∏ñ‡∏ô‡∏ô<br><small style="font-weight:400;color:var(--tx3)">20 ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</small></div></div></div></div>
    </div>
  </div>
  <!-- NAV -->
  <div class="bn">
    <button class="ni a" data-v="map"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</button>
    <button class="ni" data-v="list"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    <div class="fw"><button class="fab" onclick="openWizard()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></button></div>
    <button class="ni" data-v="rank"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="18 20 18 10"/><polyline points="12 20 12 4"/><polyline points="6 20 6 14"/></svg>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</button>
    <button class="ni" data-v="profile"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
  </div>
</div>

<!-- WIZARD -->
<div class="wo" id="wov">
  <div class="ws" id="wsh">
    <div class="wh"><div class="whb"></div></div>
    <div class="wt"><h3 id="wtitle">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</h3><button class="wcl" onclick="closeWizard()">‚úï</button></div>
    <div class="wp" id="wprog" style="display:none"><div class="wpt"><div class="wpf" id="wbar" style="width:0%"></div></div><div class="wpl" id="wlbl"></div></div>
    <div class="wb" id="wbody">

      <!-- Step: Type -->
      <div class="wst a" id="ws-type">
        <div class="sh" style="margin-top:0"><div class="si nvy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div><div><div class="st">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div></div></div>
        <div class="tcs">
          <div class="tc" data-type="accident" onclick="selectType('accident')"><div class="tci">!</div><div><h4>‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</h4><p>‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏ô ‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á</p></div></div>
          <div class="tc" data-type="frequent" onclick="selectType('frequent')"><div class="tci">‚ü≥</div><div><h4>‡∏à‡∏∏‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏ã‡πâ‡∏≥</h4><p>‡∏û‡∏ö‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ö‡πà‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p></div></div>
          <div class="tc" data-type="near" onclick="selectType('near')"><div class="tci">‚ö°</div><div><h4>‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</h4><p>‡∏°‡∏µ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏â‡∏µ‡∏¢‡∏î‡∏ä‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</p></div></div>
          <div class="tc" data-type="observe" onclick="selectType('observe')"><div class="tci">üëÅ</div><div><h4>‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h4><p>‡∏û‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏ñ‡∏ô‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</p></div></div>
        </div>
      </div>

      <!-- Step: Location -->
      <div class="wst" id="ws-location">
        <div class="sh" style="margin-top:0"><div class="si nvy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg></div><div><div class="st">‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</div><div class="ss">‡πÅ‡∏ï‡∏∞‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ GPS</div></div></div>
        <div class="fmw" id="fmw"><div id="form-map"></div>
          <button class="ffs" onclick="toggleMapFS()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg></button>
          <button class="fcf" onclick="toggleMapFS()"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> ‡∏õ‡∏¥‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠</button>
          <div class="fmt">
            <button class="fb" onclick="getGPS()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v2m0 16v2M2 12h2m16 0h2"/><circle cx="12" cy="12" r="8"/></svg>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</button>
            <button class="fb" id="btn-fsat" onclick="toggleFormSat()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/></svg>‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°</button>
            <button class="fb" onclick="clearPin()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>‡∏•‡∏ö‡∏´‡∏°‡∏∏‡∏î</button>
          </div>
        </div>
        <div class="cd empty" id="cdsp">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‚Äî ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ï‡∏∞‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô"</div>
        <div class="sh"><div class="si blu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg></div><div><div class="st">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og" id="og-place">
          <button class="oc" data-cat="place" data-val="‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å/‡πÅ‡∏¢‡∏Å" onclick="tog(this)"><div class="oi">‚úö</div><div class="ol">‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å/‡πÅ‡∏¢‡∏Å</div></button>
          <button class="oc" data-cat="place" data-val="‡∏™‡∏≤‡∏°‡πÅ‡∏¢‡∏Å" onclick="tog(this)"><div class="oi">‚ãî</div><div class="ol">‡∏™‡∏≤‡∏°‡πÅ‡∏¢‡∏Å</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ó‡∏≤‡∏á‡∏ï‡∏£‡∏á" onclick="tog(this)"><div class="oi">‚îÇ</div><div class="ol">‡∏ó‡∏≤‡∏á‡∏ï‡∏£‡∏á</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ó‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏á" onclick="tog(this)"><div class="oi">‚Ü∑</div><div class="ol">‡∏ó‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏á</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô" onclick="tog(this)"><div class="oi">‚óé</div><div class="ol">‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ó‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô" onclick="tog(this)"><div class="oi">üö∂</div><div class="ol">‡∏ó‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô</div></button>
          <button class="oc" data-cat="place" data-val="‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤" onclick="tog(this)"><div class="oi">üéì</div><div class="ol">‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ó‡∏≤‡∏á‡∏•‡∏≤‡∏î/‡∏™‡∏∞‡∏û‡∏≤‡∏ô" onclick="tog(this)"><div class="oi">‚õ∞</div><div class="ol">‡∏ó‡∏≤‡∏á‡∏•‡∏≤‡∏î/‡∏™‡∏∞‡∏û‡∏≤‡∏ô</div></button>
          <button class="oc" data-cat="place" data-val="‡∏ã‡∏≠‡∏¢/‡∏ó‡∏≤‡∏á‡πÅ‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏¢" onclick="tog(this)"><div class="oi">‚Üó</div><div class="ol">‡∏ã‡∏≠‡∏¢/‡∏ó‡∏≤‡∏á‡πÅ‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏¢</div></button>
        </div>
      </div>

      <!-- Step: Accident detail (Type A) -->
      <div class="wst" id="ws-acc">
        <div class="sh" style="margin-top:0"><div class="si red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><circle cx="12" cy="17" r="1" fill="currentColor"/></svg></div><div><div class="st">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og c2"><button class="oc sgl" data-cat="sev" data-val="‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï" onclick="sgl(this,'sev')"><div class="oi">üíÄ</div><div class="ol">‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</div></button><button class="oc sgl" data-cat="sev" data-val="‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡∏™‡∏≤‡∏´‡∏±‡∏™" onclick="sgl(this,'sev')"><div class="oi">üè•</div><div class="ol">‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡∏™‡∏≤‡∏´‡∏±‡∏™</div></button><button class="oc sgl" data-cat="sev" data-val="‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢" onclick="sgl(this,'sev')"><div class="oi">ü©π</div><div class="ol">‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</div></button><button class="oc sgl" data-cat="sev" data-val="‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢" onclick="sgl(this,'sev')"><div class="oi">üöó</div><div class="ol">‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</div></button></div>

        <div class="sh"><div class="si amb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg></div><div><div class="st">‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og" id="og-veh"><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå" onclick="tog(this)"><div class="oi">üèçÔ∏è</div><div class="ol">‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå/‡∏Å‡∏£‡∏∞‡∏ö‡∏∞" onclick="tog(this)"><div class="oi">üöó</div><div class="ol">‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå/‡∏Å‡∏£‡∏∞‡∏ö‡∏∞</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å" onclick="tog(this)"><div class="oi">üöõ</div><div class="ol">‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£" onclick="tog(this)"><div class="oi">üöå</div><div class="ol">‡∏£‡∏ñ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£</div></button><button class="oc" data-cat="veh" data-val="‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô" onclick="tog(this)"><div class="oi">üö≤</div><div class="ol">‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô</div></button><button class="oc" data-cat="veh" data-val="‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤" onclick="tog(this)"><div class="oi">üö∂</div><div class="ol">‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</div></button></div>

        <div class="sh"><div class="si red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg></div><div><div class="st">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og"><button class="oc sgl" data-cat="inc" data-val="‡∏ä‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤" onclick="sgl(this,'inc')"><div class="oi">üí•</div><div class="ol">‡∏ä‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏ä‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á" onclick="sgl(this,'inc')"><div class="oi">‚ÜîÔ∏è</div><div class="ol">‡∏ä‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏ä‡∏ô‡∏ó‡πâ‡∏≤‡∏¢" onclick="sgl(this,'inc')"><div class="oi">‚¨ÖÔ∏è</div><div class="ol">‡∏ä‡∏ô‡∏ó‡πâ‡∏≤‡∏¢</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏£‡∏ñ‡∏û‡∏•‡∏¥‡∏Å‡∏Ñ‡∏ß‡πà‡∏≥" onclick="sgl(this,'inc')"><div class="oi">üîÑ</div><div class="ol">‡∏û‡∏•‡∏¥‡∏Å‡∏Ñ‡∏ß‡πà‡∏≥</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏ä‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤" onclick="sgl(this,'inc')"><div class="oi">üö∂</div><div class="ol">‡∏ä‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏•‡πâ‡∏°‡πÄ‡∏≠‡∏á/‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏ñ‡∏•" onclick="sgl(this,'inc')"><div class="oi">‚§µÔ∏è</div><div class="ol">‡∏•‡πâ‡∏°‡πÄ‡∏≠‡∏á/‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏ñ‡∏•</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏ï‡∏Å‡∏ñ‡∏ô‡∏ô" onclick="sgl(this,'inc')"><div class="oi">‚¨áÔ∏è</div><div class="ol">‡∏ï‡∏Å‡∏ñ‡∏ô‡∏ô/‡∏Ñ‡∏•‡∏≠‡∏á</div></button><button class="oc sgl" data-cat="inc" data-val="‡∏≠‡∏∑‡πà‡∏ô‡πÜ" onclick="sgl(this,'inc')"><div class="oi">‚Ä¶</div><div class="ol">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</div></button></div>

        <div class="sh"><div class="si amb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="1" fill="currentColor"/></svg></div><div><div class="st">‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og"><button class="oc" data-cat="cause" data-val="‡∏Ç‡∏±‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô" onclick="tog(this)"><div class="oi">üí®</div><div class="ol">‡∏Ç‡∏±‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô</div></button><button class="oc" data-cat="cause" data-val="‡πÄ‡∏°‡∏≤‡∏™‡∏∏‡∏£‡∏≤" onclick="tog(this)"><div class="oi">üç∫</div><div class="ol">‡πÄ‡∏°‡∏≤‡∏™‡∏∏‡∏£‡∏≤</div></button><button class="oc" data-cat="cause" data-val="‡∏á‡πà‡∏ß‡∏á/‡∏´‡∏•‡∏±‡∏ö‡πÉ‡∏ô" onclick="tog(this)"><div class="oi">üò¥</div><div class="ol">‡∏á‡πà‡∏ß‡∏á/‡∏´‡∏•‡∏±‡∏ö‡πÉ‡∏ô</div></button><button class="oc" data-cat="cause" data-val="‡πÉ‡∏ä‡πâ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" onclick="tog(this)"><div class="oi">üì±</div><div class="ol">‡πÉ‡∏ä‡πâ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</div></button><button class="oc" data-cat="cause" data-val="‡∏ù‡πà‡∏≤‡πÑ‡∏ü‡πÅ‡∏î‡∏á" onclick="tog(this)"><div class="oi">üö¶</div><div class="ol">‡∏ù‡πà‡∏≤‡πÑ‡∏ü‡πÅ‡∏î‡∏á</div></button><button class="oc" data-cat="cause" data-val="‡∏Ç‡∏±‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏®‡∏£" onclick="tog(this)"><div class="oi">‚õî</div><div class="ol">‡∏¢‡πâ‡∏≠‡∏ô‡∏®‡∏£</div></button><button class="oc" data-cat="cause" data-val="‡∏ï‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤" onclick="tog(this)"><div class="oi">‚ÜóÔ∏è</div><div class="ol">‡∏ï‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤</div></button><button class="oc" data-cat="cause" data-val="‡∏ó‡∏±‡∏®‡∏ô‡∏ß‡∏¥‡∏™‡∏±‡∏¢‡πÑ‡∏°‡πà‡∏î‡∏µ" onclick="tog(this)"><div class="oi">üå´Ô∏è</div><div class="ol">‡∏ó‡∏±‡∏®‡∏ô‡∏ß‡∏¥‡∏™‡∏±‡∏¢‡πÑ‡∏°‡πà‡∏î‡∏µ</div></button><button class="oc" data-cat="cause" data-val="‡∏ñ‡∏ô‡∏ô‡∏•‡∏∑‡πà‡∏ô" onclick="tog(this)"><div class="oi">üåßÔ∏è</div><div class="ol">‡∏ñ‡∏ô‡∏ô‡∏•‡∏∑‡πà‡∏ô</div></button><button class="oc" data-cat="cause" data-val="‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î" onclick="tog(this)"><div class="oi">üï≥Ô∏è</div><div class="ol">‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î</div></button><button class="oc" data-cat="cause" data-val="‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î" onclick="tog(this)"><div class="oi">ü™ß</div><div class="ol">‡∏õ‡πâ‡∏≤‡∏¢/‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î</div></button><button class="oc" data-cat="cause" data-val="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" onclick="tog(this)"><div class="oi">‚ùì</div><div class="ol">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö</div></button></div>

        <div class="sh"><div class="si grn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></div><div><div class="st">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og c4"><button class="oc" data-cat="grp" data-val="‡πÄ‡∏î‡πá‡∏Å" onclick="tog(this)"><div class="oi">üë¶</div><div class="ol">‡πÄ‡∏î‡πá‡∏Å</div></button><button class="oc" data-cat="grp" data-val="‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤" onclick="tog(this)"><div class="oi">üéì</div><div class="ol">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div></button><button class="oc" data-cat="grp" data-val="‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏" onclick="tog(this)"><div class="oi">üë¥</div><div class="ol">‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏</div></button><button class="oc" data-cat="grp" data-val="‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏Å‡∏≤‡∏£" onclick="tog(this)"><div class="oi">‚ôø</div><div class="ol">‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏Å‡∏≤‡∏£</div></button></div>
      </div>

      <!-- Step: Frequent detail (Type B) -->
      <div class="wst" id="ws-freq">
        <div class="sh" style="margin-top:0"><div class="si amb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg></div><div><div class="st">‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og"><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå" onclick="tog(this)"><div class="oi">üèçÔ∏è</div><div class="ol">‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå/‡∏Å‡∏£‡∏∞‡∏ö‡∏∞" onclick="tog(this)"><div class="oi">üöó</div><div class="ol">‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå/‡∏Å‡∏£‡∏∞‡∏ö‡∏∞</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å" onclick="tog(this)"><div class="oi">üöõ</div><div class="ol">‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å</div></button><button class="oc" data-cat="veh" data-val="‡∏£‡∏ñ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£" onclick="tog(this)"><div class="oi">üöå</div><div class="ol">‡∏£‡∏ñ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£</div></button><button class="oc" data-cat="veh" data-val="‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô" onclick="tog(this)"><div class="oi">üö≤</div><div class="ol">‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô</div></button><button class="oc" data-cat="veh" data-val="‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤" onclick="tog(this)"><div class="oi">üö∂</div><div class="ol">‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</div></button></div>
        <div class="sh"><div class="si amb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="1" fill="currentColor"/></svg></div><div><div class="st">‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og"><button class="oc" data-cat="cause" data-val="‡∏Ç‡∏±‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô" onclick="tog(this)"><div class="oi">üí®</div><div class="ol">‡∏Ç‡∏±‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô</div></button><button class="oc" data-cat="cause" data-val="‡πÄ‡∏°‡∏≤‡∏™‡∏∏‡∏£‡∏≤" onclick="tog(this)"><div class="oi">üç∫</div><div class="ol">‡πÄ‡∏°‡∏≤‡∏™‡∏∏‡∏£‡∏≤</div></button><button class="oc" data-cat="cause" data-val="‡∏ù‡πà‡∏≤‡πÑ‡∏ü‡πÅ‡∏î‡∏á" onclick="tog(this)"><div class="oi">üö¶</div><div class="ol">‡∏ù‡πà‡∏≤‡πÑ‡∏ü‡πÅ‡∏î‡∏á</div></button><button class="oc" data-cat="cause" data-val="‡∏Ç‡∏±‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏®‡∏£" onclick="tog(this)"><div class="oi">‚õî</div><div class="ol">‡∏¢‡πâ‡∏≠‡∏ô‡∏®‡∏£</div></button><button class="oc" data-cat="cause" data-val="‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î" onclick="tog(this)"><div class="oi">üï≥Ô∏è</div><div class="ol">‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î</div></button><button class="oc" data-cat="cause" data-val="‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î" onclick="tog(this)"><div class="oi">ü™ß</div><div class="ol">‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î</div></button><button class="oc" data-cat="cause" data-val="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" onclick="tog(this)"><div class="oi">‚ùì</div><div class="ol">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö</div></button></div>
      </div>

      <!-- Step: Environment (all types) -->
      <div class="wst" id="ws-env">
        <div class="sh" style="margin-top:0"><div class="si blu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div><div class="st">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏/‡∏û‡∏ö‡πÄ‡∏´‡πá‡∏ô</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og c4"><button class="oc sgl" data-cat="time" data-val="‡πÄ‡∏ä‡πâ‡∏≤ (06-09)" onclick="sgl(this,'time')"><div class="oi">üåÖ</div><div class="ol">‡πÄ‡∏ä‡πâ‡∏≤</div></button><button class="oc sgl" data-cat="time" data-val="‡∏™‡∏≤‡∏¢ (09-12)" onclick="sgl(this,'time')"><div class="oi">‚òÄÔ∏è</div><div class="ol">‡∏™‡∏≤‡∏¢</div></button><button class="oc sgl" data-cat="time" data-val="‡∏ö‡πà‡∏≤‡∏¢ (12-16)" onclick="sgl(this,'time')"><div class="oi">üå§Ô∏è</div><div class="ol">‡∏ö‡πà‡∏≤‡∏¢</div></button><button class="oc sgl" data-cat="time" data-val="‡πÄ‡∏¢‡πá‡∏ô (16-19)" onclick="sgl(this,'time')"><div class="oi">üåá</div><div class="ol">‡πÄ‡∏¢‡πá‡∏ô</div></button><button class="oc sgl" data-cat="time" data-val="‡∏Ñ‡πà‡∏≥ (19-22)" onclick="sgl(this,'time')"><div class="oi">üåô</div><div class="ol">‡∏Ñ‡πà‡∏≥</div></button><button class="oc sgl" data-cat="time" data-val="‡∏î‡∏∂‡∏Å (22-06)" onclick="sgl(this,'time')"><div class="oi">üåë</div><div class="ol">‡∏î‡∏∂‡∏Å</div></button><button class="oc sgl" data-cat="time" data-val="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" onclick="sgl(this,'time')"><div class="oi">‚Äî</div><div class="ol">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö</div></button></div>
        <div class="sh"><div class="si blu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2"/><circle cx="12" cy="12" r="4"/></svg></div><div><div class="st">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ç‡πâ‡∏≠</div></div></div>
        <div class="og c4"><button class="oc sgl" data-cat="wtr" data-val="‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î" onclick="sgl(this,'wtr')"><div class="oi">‚òÄÔ∏è</div><div class="ol">‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î</div></button><button class="oc sgl" data-cat="wtr" data-val="‡∏ù‡∏ô‡∏ï‡∏Å" onclick="sgl(this,'wtr')"><div class="oi">üåßÔ∏è</div><div class="ol">‡∏ù‡∏ô‡∏ï‡∏Å</div></button><button class="oc sgl" data-cat="wtr" data-val="‡∏´‡∏°‡∏≠‡∏Å" onclick="sgl(this,'wtr')"><div class="oi">üå´Ô∏è</div><div class="ol">‡∏´‡∏°‡∏≠‡∏Å</div></button><button class="oc sgl" data-cat="wtr" data-val="‡∏õ‡∏Å‡∏ï‡∏¥" onclick="sgl(this,'wtr')"><div class="oi">‚õÖ</div><div class="ol">‡∏õ‡∏Å‡∏ï‡∏¥</div></button></div>
        <div class="sh"><div class="si nvy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 20h20M5 20V8l7-5 7 5v12"/><rect x="9" y="12" width="6" height="8"/></svg></div><div><div class="st">‡∏Ç‡πâ‡∏≠‡∏ö‡∏Å‡∏û‡∏£‡πà‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</div><div class="ss">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</div></div></div>
        <div class="og"><button class="oc" data-cat="infra" data-val="‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏´‡∏•‡∏∏‡∏°‡∏ö‡πà‡∏≠" onclick="tog(this)"><div class="oi">üï≥Ô∏è</div><div class="ol">‡∏ñ‡∏ô‡∏ô‡∏ä‡∏≥‡∏£‡∏∏‡∏î</div></button><button class="oc" data-cat="infra" data-val="‡πÑ‡∏ü‡∏ñ‡∏ô‡∏ô‡∏î‡∏±‡∏ö" onclick="tog(this)"><div class="oi">üî¶</div><div class="ol">‡πÑ‡∏ü‡∏ñ‡∏ô‡∏ô‡∏î‡∏±‡∏ö</div></button><button class="oc" data-cat="infra" data-val="‡∏õ‡πâ‡∏≤‡∏¢‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î" onclick="tog(this)"><div class="oi">ü™ß</div><div class="ol">‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î</div></button><button class="oc" data-cat="infra" data-val="‡πÄ‡∏™‡πâ‡∏ô‡∏à‡∏£‡∏≤‡∏à‡∏£‡∏•‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏ô" onclick="tog(this)"><div class="oi">„Ä∞Ô∏è</div><div class="ol">‡πÄ‡∏™‡πâ‡∏ô‡∏•‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏ô</div></button><button class="oc" data-cat="infra" data-val="‡∏à‡∏∏‡∏î‡∏ö‡∏î‡∏ö‡∏±‡∏á‡∏ó‡∏±‡∏®‡∏ô‡∏ß‡∏¥‡∏™‡∏±‡∏¢" onclick="tog(this)"><div class="oi">üå≥</div><div class="ol">‡∏ö‡∏î‡∏ö‡∏±‡∏á‡∏ó‡∏±‡∏®‡∏ô‡∏ß‡∏¥‡∏™‡∏±‡∏¢</div></button><button class="oc" data-cat="infra" data-val="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÑ‡∏ü" onclick="tog(this)"><div class="oi">üö¶</div><div class="ol">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÑ‡∏ü</div></button><button class="oc" data-cat="infra" data-val="‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏Å‡∏≤‡∏∞‡∏Å‡∏±‡πâ‡∏ô" onclick="tog(this)"><div class="oi">üöß</div><div class="ol">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏Å‡∏≤‡∏∞‡∏Å‡∏±‡πâ‡∏ô</div></button><button class="oc" data-cat="infra" data-val="‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î" onclick="tog(this)"><div class="oi">ü¶∂</div><div class="ol">‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î</div></button><button class="oc" data-cat="infra" data-val="‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏Ç‡∏±‡∏á" onclick="tog(this)"><div class="oi">üíß</div><div class="ol">‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏Ç‡∏±‡∏á</div></button></div>
      </div>

      <!-- Step: Photo + Description (all types) -->
      <div class="wst" id="ws-photo">
        <div class="sh" style="margin-top:0"><div class="si nvy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></div><div><div class="st">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</div><div class="ss">‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô</div></div></div>
        <div class="pz" onclick="document.getElementById('finp').click()"><div class="pzi"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></div><div class="pzt"><h4>‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡∏•‡∏ö‡∏±‡πâ‡∏°</h4><p>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå JPG, PNG</p></div></div>
        <input type="file" id="finp" accept="image/*" capture="environment" multiple style="display:none" onchange="hPhoto(event)">
        <div class="pp" id="pprev"></div>
        <div class="sh"><div class="si nvy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div><div><div class="st">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</div><div class="ss">‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô</div></div></div>
        <textarea class="da" id="inp-desc" rows="3" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."></textarea>
      </div>
    </div>
    <div class="wf" id="wfoot" style="display:none"><button class="bbk" id="bbk" onclick="wizBack()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button><button class="bnx" id="bnx" onclick="wizNext()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button></div>
  </div>
</div>
<div class="toast" id="toast"></div>

<script>
const GAS_URL='YOUR_GAS_URL_HERE';
const C=[16.828320181455258,100.21024832219005];
const OSM='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
const SAT='https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}';
const FM={'01':'‡∏Ñ‡∏ì‡∏∞‡∏Ñ‡∏£‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','02':'‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','03':'‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£','04':'‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ','05':'‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£','06':'‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°','07':'‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô','08':'‡∏Ñ‡∏ì‡∏∞‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','09':'‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô','12':'‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£','22':'‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£'};
const TL={accident:'‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏',frequent:'‡∏à‡∏∏‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏ã‡πâ‡∏≥',near:'‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏',observe:'‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á'};
const TC={accident:'#b91c1c',frequent:'#b45309',near:'#15803d',observe:'#1d4ed8'};
const A={user:null,reports:[],photos:[]};
let mm,mOsm,mSat,mIsSat=false,mMks=[],mHeat,mCluster,cMode='pin';
let fm,fOsm,fSat,fIsSat=false,fMk;
let W={type:'',step:0,steps:[],lat:null,lng:null};

window.onload=function(){
  let s=localStorage.getItem('sr7u');if(s){A.user=JSON.parse(s);enterApp();}
  let r=localStorage.getItem('sr7r');if(r)A.reports=JSON.parse(r);
  document.querySelectorAll('#ltabs button').forEach(t=>t.addEventListener('click',function(){document.querySelectorAll('#ltabs button').forEach(b=>b.classList.remove('a'));this.classList.add('a');document.querySelectorAll('.lf').forEach(f=>f.classList.remove('a'));document.getElementById('lf-'+this.dataset.t).classList.add('a');}));
  document.getElementById('inp-sid').addEventListener('input',function(){let v=this.value.replace(/\D/g,'');this.value=v;if(v.length>=4){let c=v.substring(2,4),n=FM[c],sel=document.getElementById('sel-fac');if(n){for(let i=0;i<sel.options.length;i++){if(sel.options[i].value===n){sel.selectedIndex=i;break;}}document.getElementById('fac-hint').textContent='\u2713 ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö: '+n;document.getElementById('fac-hint').style.color='var(--grn)';}}});
  document.querySelectorAll('.ni').forEach(i=>i.addEventListener('click',function(){switchView(this.dataset.v);}));
  document.querySelectorAll('#fchips .cp').forEach(c=>c.addEventListener('click',function(){document.querySelectorAll('#fchips .cp').forEach(x=>x.classList.remove('a'));this.classList.add('a');renderList(this.dataset.f);}));
};

function doLogin(){let af=document.querySelector('.lf.a'),t=af.id.replace('lf-',''),n='',f='',sid='';
  if(t==='student'){sid=document.getElementById('inp-sid').value.trim();f=document.getElementById('sel-fac').value;let fn=document.getElementById('inp-fn-s').value.trim(),ln=document.getElementById('inp-ln-s').value.trim();if(sid.length!==10){document.getElementById('sid-err').classList.add('show');setTimeout(()=>document.getElementById('sid-err').classList.remove('show'),3000);return;}if(!f||!fn||!ln){toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á','err');return;}n=fn+' '+ln;}
  else if(t==='staff'){f=document.getElementById('sel-fac-staff').value;let fn=document.getElementById('inp-fn-st').value.trim(),ln=document.getElementById('inp-ln-st').value.trim();if(!f||!fn||!ln){toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á','err');return;}n=fn+' '+ln;}
  else if(t==='public'){let fn=document.getElementById('inp-fn-p').value.trim(),ln=document.getElementById('inp-ln-p').value.trim();if(!fn||!ln){toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•','err');return;}n=fn+' '+ln;}
  else{n='‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô';}
  A.user={type:t,name:n,fac:f,sid:sid,points:0,rptCount:0};localStorage.setItem('sr7u',JSON.stringify(A.user));enterApp();}

function enterApp(){document.getElementById('login-screen').style.opacity='0';setTimeout(()=>{document.getElementById('login-screen').style.display='none';document.getElementById('app-main').style.display='flex';upUI();initMM();renderList('all');renderLB();},350);}

function upUI(){if(!A.user)return;document.getElementById('hdr-pts').textContent=A.user.points+' PT';document.getElementById('prof-name').textContent=A.user.name;document.getElementById('prof-fac').textContent=A.user.fac||(A.user.type==='public'?'‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ':'‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô');document.getElementById('prof-pts').textContent=A.user.points;document.getElementById('prof-rpt').textContent=A.user.rptCount;if(A.user.rptCount>=1)document.getElementById('b1').classList.add('e');if(A.user.rptCount>=5)document.getElementById('b5').classList.add('e');if(A.user.rptCount>=20)document.getElementById('b20').classList.add('e');}

function switchView(v){document.querySelectorAll('.vw').forEach(x=>x.classList.remove('a'));document.querySelectorAll('.ni').forEach(x=>x.classList.remove('a'));document.getElementById('view-'+v).classList.add('a');document.querySelector('.ni[data-v="'+v+'"]').classList.add('a');if(v==='map'&&mm)setTimeout(()=>mm.invalidateSize(),100);}

function initMM(){if(mm)return;mm=L.map('main-map',{zoomControl:false}).setView(C,16);L.control.zoom({position:'topleft'}).addTo(mm);mOsm=L.tileLayer(OSM,{maxZoom:19,attribution:'\u00a9 OSM'}).addTo(mm);mSat=L.tileLayer(SAT,{maxZoom:19});mCluster=L.markerClusterGroup();A.reports.forEach(r=>addMk(r));setMapMode('pin',document.querySelector('.mmb button.a'));}
function toggleMainSat(){mIsSat=!mIsSat;if(mIsSat){mm.removeLayer(mOsm);mm.addLayer(mSat);}else{mm.removeLayer(mSat);mm.addLayer(mOsm);}document.getElementById('mc-sat').classList.toggle('a',mIsSat);}
function locateMe(){if(!navigator.geolocation){toast('‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS','err');return;}navigator.geolocation.getCurrentPosition(p=>mm.setView([p.coords.latitude,p.coords.longitude],17),()=>toast('‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ','err'));}
function addMk(r){if(!mm||!r.lat||!r.lng)return;let c=TC[r.type]||'#1a365d';let mk=L.circleMarker([r.lat,r.lng],{radius:9,fillColor:c,color:'#fff',weight:2.5,fillOpacity:.9});mk.bindPopup('<div style="font-family:Sarabun;min-width:150px"><b style="color:'+c+'">'+TL[r.type]+'</b><br><span style="font-size:11px;color:#888">'+(r.date||'')+'</span>'+(r.desc?'<p style="font-size:13px;margin:4px 0">'+r.desc+'</p>':'')+(r.tags&&r.tags.length?'<div style="margin-top:6px">'+r.tags.map(t=>'<span style="display:inline-block;background:#f0f2f7;padding:1px 6px;border-radius:3px;font-size:10px;margin:1px">'+t+'</span>').join('')+'</div>':'')+'</div>');mMks.push(mk);}
function setMapMode(m,btn){cMode=m;document.querySelectorAll('.mmb button').forEach(b=>b.classList.remove('a'));btn.classList.add('a');mMks.forEach(mk=>mm.removeLayer(mk));if(mHeat)mm.removeLayer(mHeat);mm.removeLayer(mCluster);mCluster.clearLayers();if(m==='pin'){mMks.forEach(mk=>mk.addTo(mm));}else if(m==='heat'){let pts=A.reports.filter(r=>r.lat&&r.lng).map(r=>[r.lat,r.lng,1]);mHeat=L.heatLayer(pts,{radius:30,blur:20,maxZoom:17}).addTo(mm);}else{mMks.forEach(mk=>mCluster.addLayer(mk));mm.addLayer(mCluster);}}

function initFM(){if(fm){fm.invalidateSize();return;}fm=L.map('form-map',{zoomControl:true}).setView(C,16);fOsm=L.tileLayer(OSM,{maxZoom:19}).addTo(fm);fSat=L.tileLayer(SAT,{maxZoom:19});fm.on('click',function(e){setPin(e.latlng.lat,e.latlng.lng);});setTimeout(()=>fm.invalidateSize(),200);}
function setPin(lat,lng){W.lat=lat;W.lng=lng;if(!fMk){fMk=L.marker([lat,lng],{draggable:true}).addTo(fm);fMk.on('dragend',function(){let p=fMk.getLatLng();W.lat=p.lat;W.lng=p.lng;upCD();});}else{fMk.setLatLng([lat,lng]);}fm.setView([lat,lng],Math.max(fm.getZoom(),17));upCD();}
function upCD(){let el=document.getElementById('cdsp');if(W.lat&&W.lng){el.textContent='\u2713 ‡∏û‡∏¥‡∏Å‡∏±‡∏î: '+W.lat.toFixed(6)+', '+W.lng.toFixed(6);el.classList.remove('empty');}else{el.textContent='‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á';el.classList.add('empty');}}
function getGPS(){if(!navigator.geolocation){toast('‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS','err');return;}let el=document.getElementById('cdsp');el.textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á...';el.classList.remove('empty');navigator.geolocation.getCurrentPosition(p=>setPin(p.coords.latitude,p.coords.longitude),()=>{toast('‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ','err');el.textContent='‡∏î‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à';el.classList.add('empty');});}
function toggleFormSat(){fIsSat=!fIsSat;if(fIsSat){fm.removeLayer(fOsm);fm.addLayer(fSat);}else{fm.removeLayer(fSat);fm.addLayer(fOsm);}document.getElementById('btn-fsat').classList.toggle('a',fIsSat);}
function clearPin(){if(fMk){fm.removeLayer(fMk);fMk=null;}W.lat=null;W.lng=null;upCD();}
function toggleMapFS(){document.getElementById('fmw').classList.toggle('fs');setTimeout(()=>fm.invalidateSize(),100);}

function openWizard(){W={type:'',step:0,steps:[],lat:null,lng:null};A.photos=[];document.querySelectorAll('.oc').forEach(c=>c.classList.remove('sel'));document.getElementById('inp-desc').value='';document.getElementById('pprev').innerHTML='';if(fMk&&fm){fm.removeLayer(fMk);fMk=null;}document.querySelectorAll('.wst').forEach(s=>s.classList.remove('a'));document.getElementById('ws-type').classList.add('a');document.getElementById('wfoot').style.display='none';document.getElementById('wprog').style.display='none';document.getElementById('wtitle').textContent='‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà';document.getElementById('wov').classList.add('open');}
function closeWizard(){document.getElementById('wov').classList.remove('open');document.getElementById('fmw').classList.remove('fs');}
function selectType(t){W.type=t;if(t==='accident')W.steps=['ws-location','ws-acc','ws-env','ws-photo'];else if(t==='frequent')W.steps=['ws-location','ws-freq','ws-env','ws-photo'];else W.steps=['ws-location','ws-env','ws-photo'];W.step=0;showWS();document.getElementById('wfoot').style.display='flex';document.getElementById('wprog').style.display='block';setTimeout(()=>initFM(),100);}
function showWS(){let sid=W.steps[W.step];document.querySelectorAll('.wst').forEach(s=>s.classList.remove('a'));document.getElementById(sid).classList.add('a');let titles={'ws-location':'‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà','ws-acc':'‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏','ws-freq':'‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∏‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏ã‡πâ‡∏≥','ws-env':'‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á','ws-photo':'‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢'};document.getElementById('wtitle').textContent=titles[sid]||'‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô';let pct=Math.round(((W.step+1)/W.steps.length)*100);document.getElementById('wbar').style.width=pct+'%';document.getElementById('wlbl').textContent='‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà '+(W.step+1)+' ‡∏à‡∏≤‡∏Å '+W.steps.length;document.getElementById('bbk').style.visibility=W.step===0?'hidden':'visible';let nb=document.getElementById('bnx');if(W.step===W.steps.length-1){nb.textContent='‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô';nb.classList.add('sub');}else{nb.textContent='‡∏ñ‡∏±‡∏î‡πÑ‡∏õ';nb.classList.remove('sub');}if(sid==='ws-location'&&fm)setTimeout(()=>fm.invalidateSize(),150);document.getElementById('wbody').scrollTop=0;}
function wizNext(){if(W.steps[W.step]==='ws-location'&&!W.lat){toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô','err');return;}if(W.step<W.steps.length-1){W.step++;showWS();}else{submitRpt();}}
function wizBack(){if(W.step>0){W.step--;showWS();}}
function tog(b){b.classList.toggle('sel');}
function sgl(b,cat){b.closest('.og').querySelectorAll('.oc[data-cat="'+cat+'"]').forEach(c=>c.classList.remove('sel'));b.classList.add('sel');}
function hPhoto(e){let f=e.target.files;for(let i of f){if(A.photos.length>=5)break;let r=new FileReader();r.onload=ev=>{A.photos.push(ev.target.result);rPP();};r.readAsDataURL(i);}e.target.value='';}
function rPP(){document.getElementById('pprev').innerHTML=A.photos.map((p,i)=>'<div class="pt"><img src="'+p+'"><button class="ptd" onclick="rmP('+i+')">x</button></div>').join('');}
function rmP(i){A.photos.splice(i,1);rPP();}

function submitRpt(){let d={place:[],veh:[],inc:'',cause:[],grp:[],infra:[],sev:'',time:'',wtr:''};document.querySelectorAll('.oc.sel').forEach(c=>{let cat=c.dataset.cat,val=c.dataset.val;if(cat==='place')d.place.push(val);else if(cat==='veh')d.veh.push(val);else if(cat==='inc')d.inc=val;else if(cat==='cause')d.cause.push(val);else if(cat==='grp')d.grp.push(val);else if(cat==='infra')d.infra.push(val);else if(cat==='sev')d.sev=val;else if(cat==='time')d.time=val;else if(cat==='wtr')d.wtr=val;});
  let tags=[...d.place,...d.veh,...d.cause,...d.infra];if(d.inc)tags.push(d.inc);if(d.sev)tags.push(d.sev);
  let rpt={id:'SR_'+Date.now(),type:W.type,lat:W.lat,lng:W.lng,desc:document.getElementById('inp-desc').value.trim(),tags:tags,sev:d.sev,vehicles:d.veh,incident:d.inc,causes:d.cause,groups:d.grp,infra:d.infra,place:d.place,time:d.time,weather:d.wtr,date:new Date().toLocaleDateString('th-TH',{year:'numeric',month:'short',day:'numeric'}),timestamp:new Date().toISOString(),user:A.user.name,userType:A.user.type,userFac:A.user.fac,userSid:A.user.sid||'',hasPhoto:A.photos.length>0,status:'pending'};
  A.reports.push(rpt);localStorage.setItem('sr7r',JSON.stringify(A.reports));A.user.points+=10;A.user.rptCount+=1;localStorage.setItem('sr7u',JSON.stringify(A.user));upUI();addMk(rpt);setMapMode(cMode,document.querySelector('.mmb button.a'));renderList('all');renderLB();sendGAS(rpt);toast('‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚Äî ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö +10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô');closeWizard();}

function sendGAS(r){if(!GAS_URL||GAS_URL==='YOUR_GAS_URL_HERE')return;let p={sev:r.type,injury:r.sev,place:r.place.join('|'),lat:r.lat,lng:r.lng,vehicles:r.vehicles,incident:r.incident,causes:r.causes,groups:r.groups,infra:r.infra,time_slot:r.time,weather:r.weather,desc:r.desc,hasPhoto:r.hasPhoto,studentId:r.userSid,reporter:r.user,faculty:r.userFac,reporter_role:r.userType,id:r.id,status:'pending'};try{fetch(GAS_URL+'?action=addReport&data='+encodeURIComponent(JSON.stringify(p)),{method:'POST',mode:'no-cors'});}catch(e){}}

function renderList(f){f=f||'all';let c=document.getElementById('rpt-list'),items=A.reports.slice().sort((a,b)=>(b.id||'').localeCompare(a.id||''));if(f!=='all')items=items.filter(r=>r.type===f);if(!items.length){c.innerHTML='<div class="es"><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p></div>';return;}c.innerHTML=items.map(r=>'<div class="ri '+r.type+'"><div class="rih"><span class="rtb">'+TL[r.type]+'</span><span class="rdt">'+(r.date||'')+'</span></div><div class="rds">'+(r.desc||'‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢')+'</div><div class="rts">'+(r.tags||[]).map(t=>'<span class="rt">'+t+'</span>').join('')+'</div></div>').join('');}

function renderLB(){let c=document.getElementById('rank-list'),l=[{n:'‡∏™‡∏°‡∏≤‡∏ô ‡πÉ‡∏à‡∏î‡∏µ',f:'‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ø',p:120},{n:'‡∏ß‡∏¥‡∏ä‡∏±‡∏¢ ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ñ‡∏ô‡∏ô',f:'‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°',p:85},{n:'‡∏™‡∏°‡∏®‡∏£‡∏µ ‡∏°‡∏µ‡∏™‡∏∏‡∏Ç',f:'‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',p:40}];if(A.user&&A.user.points>0)l.push({n:A.user.name+' (‡∏Ñ‡∏∏‡∏ì)',f:A.user.fac||'',p:A.user.points});l.sort((a,b)=>b.p-a.p);c.innerHTML=l.map((x,i)=>'<div class="rki"><div class="rkn">'+(i+1)+'</div><div class="rkin"><b>'+x.n+'</b><small>'+x.f+'</small></div><div class="rkp">'+x.p+'</div></div>').join('');}

function toast(msg,type){let t=document.getElementById('toast');t.textContent=msg;t.className='toast show'+(type==='err'?' err':'');setTimeout(()=>t.className='toast',3500);}
</script>
</body>
</html>
